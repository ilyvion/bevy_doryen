<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Bevy Tasks"><title>bevy_tasks - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="bevy_tasks" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.1 (a28077b28 2023-12-04)" data-channel="1.74.1" data-search-js="search-8be46b629f5f14a8.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../bevy_tasks/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../bevy_tasks/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate bevy_tasks</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.12.1</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">bevy_tasks</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/bevy_tasks/lib.rs.html#1-62">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="bevy-tasks"><a href="#bevy-tasks">Bevy Tasks</a></h2>
<p><a href="https://github.com/bevyengine/bevy#license"><img src="https://img.shields.io/badge/license-MIT%2FApache-blue.svg" alt="License" /></a>
<a href="https://crates.io/crates/bevy_tasks"><img src="https://img.shields.io/crates/v/bevy.svg" alt="Crates.io" /></a>
<a href="https://crates.io/crates/bevy_tasks"><img src="https://img.shields.io/crates/d/bevy_tasks.svg" alt="Downloads" /></a>
<a href="https://docs.rs/bevy_tasks/latest/bevy_tasks/"><img src="https://docs.rs/bevy_tasks/badge.svg" alt="Docs" /></a>
<a href="https://discord.gg/bevy"><img src="https://img.shields.io/discord/691052431525675048.svg?label=&amp;logo=discord&amp;logoColor=ffffff&amp;color=7389D8&amp;labelColor=6A7EC2" alt="Discord" /></a></p>
<p>A refreshingly simple task executor for bevy. :)</p>
<p>This is a simple threadpool with minimal dependencies. The main usecase is a scoped fork-join, i.e. spawning tasks from
a single thread and having that thread await the completion of those tasks. This is intended specifically for
<a href="https://bevyengine.org"><code>bevy</code></a> as a lighter alternative to <a href="https://github.com/rayon-rs/rayon"><code>rayon</code></a> for this specific usecase. There are also utilities for
generating the tasks from a slice of data. This library is intended for games and makes no attempt to ensure fairness
or ordering of spawned tasks.</p>
<p>It is based on <a href="https://github.com/stjepang/async-executor"><code>async-executor</code></a>, a lightweight executor that allows the end user to manage their own threads.
<code>async-executor</code> is based on async-task, a core piece of async-std.</p>
<h3 id="usage"><a href="#usage">Usage</a></h3>
<p>In order to be able to optimize task execution in multi-threaded environments,
bevy provides three different thread pools via which tasks of different kinds can be spawned.
(The same API is used in single-threaded environments, even if execution is limited to a single thread.
This currently applies to WASM targets.)
The determining factor for what kind of work should go in each pool is latency requirements:</p>
<ul>
<li>
<p>For CPU-intensive work (tasks that generally spin until completion) we have a standard
<a href="struct.ComputeTaskPool.html" title="struct bevy_tasks::ComputeTaskPool"><code>ComputeTaskPool</code></a> and an <a href="struct.AsyncComputeTaskPool.html" title="struct bevy_tasks::AsyncComputeTaskPool"><code>AsyncComputeTaskPool</code></a>. Work that does not need to be completed to
present the next frame should go to the <a href="struct.AsyncComputeTaskPool.html" title="struct bevy_tasks::AsyncComputeTaskPool"><code>AsyncComputeTaskPool</code></a>.</p>
</li>
<li>
<p>For IO-intensive work (tasks that spend very little time in a “woken” state) we have an
<a href="struct.IoTaskPool.html" title="struct bevy_tasks::IoTaskPool"><code>IoTaskPool</code></a> whose tasks are expected to complete very quickly. Generally speaking, they should just
await receiving data from somewhere (i.e. disk) and signal other systems when the data is ready
for consumption. (likely via channels)</p>
</li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="prelude/index.html" title="mod bevy_tasks::prelude">prelude</a></div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AsyncComputeTaskPool.html" title="struct bevy_tasks::AsyncComputeTaskPool">AsyncComputeTaskPool</a></div><div class="desc docblock-short">A newtype for a task pool for CPU-intensive work that may span across multiple frames</div></li><li><div class="item-name"><a class="struct" href="struct.ComputeTaskPool.html" title="struct bevy_tasks::ComputeTaskPool">ComputeTaskPool</a></div><div class="desc docblock-short">A newtype for a task pool for CPU-intensive work that must be completed to
deliver the next frame</div></li><li><div class="item-name"><a class="struct" href="struct.IoTaskPool.html" title="struct bevy_tasks::IoTaskPool">IoTaskPool</a></div><div class="desc docblock-short">A newtype for a task pool for IO-intensive work (i.e. tasks that spend very little time in a
“woken” state)</div></li><li><div class="item-name"><a class="struct" href="struct.Scope.html" title="struct bevy_tasks::Scope">Scope</a></div><div class="desc docblock-short">A <code>TaskPool</code> scope for running one or more non-<code>'static</code> futures.</div></li><li><div class="item-name"><a class="struct" href="struct.Task.html" title="struct bevy_tasks::Task">Task</a></div><div class="desc docblock-short">Wraps <code>async_executor::Task</code>, a spawned future.</div></li><li><div class="item-name"><a class="struct" href="struct.TaskPool.html" title="struct bevy_tasks::TaskPool">TaskPool</a></div><div class="desc docblock-short">A thread pool for executing tasks. Tasks are futures that are being automatically driven by
the pool on threads owned by the pool. In this case - main thread only.</div></li><li><div class="item-name"><a class="struct" href="struct.TaskPoolBuilder.html" title="struct bevy_tasks::TaskPoolBuilder">TaskPoolBuilder</a></div><div class="desc docblock-short">Used to create a <a href="struct.TaskPool.html" title="struct bevy_tasks::TaskPool"><code>TaskPool</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ThreadExecutor.html" title="struct bevy_tasks::ThreadExecutor">ThreadExecutor</a></div><div class="desc docblock-short">This is a dummy struct for wasm support to provide the same api as with the multithreaded
task pool. In the case of the multithreaded task pool this struct is used to spawn
tasks on a specific thread. But the wasm task pool just calls
<code>wasm_bindgen_futures::spawn_local</code> for spawning which just runs tasks on the main thread
and so the <a href="struct.ThreadExecutor.html" title="struct bevy_tasks::ThreadExecutor"><code>ThreadExecutor</code></a> does nothing.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.ParallelIterator.html" title="trait bevy_tasks::ParallelIterator">ParallelIterator</a></div><div class="desc docblock-short"><a href="trait.ParallelIterator.html" title="trait bevy_tasks::ParallelIterator"><code>ParallelIterator</code></a> closely emulates the <code>std::iter::Iterator</code>
interface. However, it uses <code>bevy_task</code> to compute batches in parallel.</div></li><li><div class="item-name"><a class="trait" href="trait.ParallelSlice.html" title="trait bevy_tasks::ParallelSlice">ParallelSlice</a></div><div class="desc docblock-short">Provides functions for mapping read-only slices across a provided <a href="struct.TaskPool.html" title="struct bevy_tasks::TaskPool"><code>TaskPool</code></a>.</div></li><li><div class="item-name"><a class="trait" href="trait.ParallelSliceMut.html" title="trait bevy_tasks::ParallelSliceMut">ParallelSliceMut</a></div><div class="desc docblock-short">Provides functions for mapping mutable slices across a provided <a href="struct.TaskPool.html" title="struct bevy_tasks::TaskPool"><code>TaskPool</code></a>.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.available_parallelism.html" title="fn bevy_tasks::available_parallelism">available_parallelism</a></div><div class="desc docblock-short">Gets the logical CPU core count available to the current process.</div></li><li><div class="item-name"><a class="fn" href="fn.block_on.html" title="fn bevy_tasks::block_on">block_on</a></div><div class="desc docblock-short">Blocks the current thread on a future.</div></li><li><div class="item-name"><a class="fn" href="fn.tick_global_task_pools_on_main_thread.html" title="fn bevy_tasks::tick_global_task_pools_on_main_thread">tick_global_task_pools_on_main_thread</a></div><div class="desc docblock-short">A function used by <code>bevy_core</code> to tick the global tasks pools on the main thread.
This will run a maximum of 100 local tasks per executor per call to this function.</div></li></ul></section></div></main></body></html>