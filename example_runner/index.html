<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Bevy Doryen</title>
        <link data-trunk rel="copy-file" href="../www/Aesomatica_16x16.png" />
        <link data-trunk rel="copy-file" href="../www/Bisasam_20x20.png" />
        <link
            data-trunk
            rel="copy-file"
            href="../www/Buddy--graphical_10x10.png"
        />
        <link data-trunk rel="copy-file" href="../www/Cheepicus_15x15.png" />
        <link data-trunk rel="copy-file" href="../www/Cheepicus_16x16.png" />
        <link data-trunk rel="copy-file" href="../www/Cheepicus_8x8.png" />
        <link data-trunk rel="copy-file" href="../www/Herrbdog_12x12.png" />
        <link data-trunk rel="copy-file" href="../www/Kein_5x5.png" />
        <link data-trunk rel="copy-file" href="../www/Mkv_curses_6x6.png" />
        <link data-trunk rel="copy-file" href="../www/Runeset_24x24.png" />
        <link data-trunk rel="copy-file" href="../www/skull.png" />
        <link data-trunk rel="copy-file" href="../www/SmoothWalls_9x9.png" />
        <link data-trunk rel="copy-file" href="../www/Teeto_K_18x18.png" />
        <link data-trunk rel="copy-file" href="../www/Terbert_7x7.png" />
        <link data-trunk rel="copy-file" href="../www/terminal_10x16.png" />
        <link data-trunk rel="copy-file" href="../www/terminal_12x12.png" />
        <link data-trunk rel="copy-file" href="../www/terminal_8x12.png" />
        <link data-trunk rel="copy-file" href="../www/terminal_8x8.png" />
        <link
            data-trunk
            rel="copy-file"
            href="../www/terminal_colored_8x8.png"
        />
        <link data-trunk rel="copy-file" href="../www/unicode_16x16.png" />
        <link data-trunk rel="copy-file" href="../www/Yayo_tunur_13x13.png" />
        <link data-trunk rel="copy-dir" href="../www/demo" />
        <style>
            html,
            body {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <script>
            async function goFullScreen() {
                const canvas = document.getElementById("canvas");
                await canvas.requestFullscreen();
            }

            let initialWidth, initialHeight;

            function onFullscreenChange() {
                const canvas = document.getElementById("canvas");
                if (document.fullscreenElement) {
                    // Entered fullscreen mode
                    // Resize canvas to screen
                    canvas.width = canvas.clientWidth;
                    canvas.height = canvas.clientHeight;
                    //canvas.style.width = `${canvas.clientWidth}px`;
                    //canvas.style.height = `${canvas.clientHeight}px`;
                } else {
                    // Left fullscreen mode
                    // Restore canvas size
                    canvas.width = initialWidth;
                    canvas.height = initialHeight;
                    //canvas.style.width = `${initialWidth}px`;
                    //canvas.style.height = `${initialHeight}px`;
                }
            }

            function onLoad() {
                const canvas = document.getElementById("canvas");
                if (!canvas) {
                    setTimeout(onLoad, 100);
                    return;
                }

                canvas.insertAdjacentHTML(
                    "afterend",
                    `<p>
                        <button id="goFullScreen">Go Fullscreen</button>
                    </p>
                    <p>
                        Mouse events don't work right in full screen mode,
                        so examples involving the mouse will be misbehaving
                        when in full screen mode. I believe this to be a bug in
                        Doryen itself.
                    </p>`
                );

                document
                    .getElementById("goFullScreen")
                    .addEventListener("click", goFullScreen);

                initialWidth = canvas.clientWidth;
                initialHeight = canvas.clientHeight;
                canvas.addEventListener("fullscreenchange", onFullscreenChange);
            }
            setTimeout(onLoad, 100);
        </script>
    </body>
</html>
